<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .result {
      font-size: 20px;
      margin-top: 20px;

    }


    .totalGrade {
      padding-left: 30px;

      display: none;
      animation: 03s fadeIn;
    }

    .totalGradeDisplay {
      display: block;
    }

    .totalGradeNoDisplay {
      display: none;
    }

    #totalSeitouritsu {
      font-size: 24px;
    }

    #totalComment {
      font-size: 24px;
      color: red;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(-10px);

      }

      100% {
        opacity: 1;
        transform: none;
      }

    }
  </style>
</head>

<body>
  <h3>ä¸­å›½èªã€€ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</h3>
  <img id="flashcard-image" width="300" height="300">
  
  <form class="formDisplay formDisplayNone">
    <input id="answer" type="text">
    <button id="chkInput">check</button>
    <p id="comment"></p>
  </form>
  <div id="result" class="result resultNone">æ­£è§£: 0 å› ä¸æ­£è§£: 0 å›</div>
  <div class="totalGrade totalGradeNoDisplay">
    <p id="totalSeitouritsu"></p>
    <p id="totalComment"></p>

  </div>
  <script>
    // ä»®ã®ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
    let flashcards = [
      { image: 'images/yabo.jpg', word: 'é¸­è„–' },
      { image: 'images/beergarden.jpg', word: 'å•¤é…’èŠ±å›­' },
      // ä»–ã®ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ ...
    ];
    const synth = window.speechSynthesis;
    let currentIndex = 0;
    let correctCount = 0;
    let incorrectCount = 0;
    const totalGrade = document.querySelector('.totalGrade');
    // åˆæœŸåŒ–
    let button = document.getElementById('chkInput');
    button.addEventListener('click', checkAnswer);
    showFlashcard();

    // ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function showFlashcard() {
      let flashcard = flashcards[currentIndex];
      let imgElement = document.getElementById('flashcard-image');
      let comment = document.getElementById('comment');

      // ç”»åƒã¨çµæœã‚’ãƒªã‚»ãƒƒãƒˆ
      imgElement.src = flashcard.image;
      comment.textContent = '';
    }

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
    function checkAnswer(e) {
      e.preventDefault();
      let flashcard = flashcards[currentIndex];
      let answerElement = document.getElementById('answer');
      let comment = document.getElementById('comment');
      if (button.textContent === 'check') {
        button.textContent = 'next';
        // å›ç­”ãŒæ­£ã—ã„ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
        if (flashcard.word === answerElement.value) {
          comment.textContent = 'å¥½ï¼èµğŸ‘';
          speakText2(comment.textContent);
          console.log('seikai')
          correctCount++;
        } else {
          comment.textContent = `é”™Ã—ã€€å†åŠ æ²¹ï¼ï¼ ${flashcard.word}`;
          speakText2(comment.textContent);
          console.log('fuseikai');
          incorrectCount++;
        }


        displayResult();

      } else {

        // æ¬¡ã®ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ã«é€²ã‚€
        currentIndex++;
        if (currentIndex === flashcards.length) {
        
          totalGrade.classList.add('totalGradeDisplay');
          totalGrade.classList.remove('totalGradeNoDisplay');
          let totalSeitouritsu = document.getElementById('totalSeitouritsu');
          let totalComment = document.getElementById('totalComment');
          let mondaisu = flashcards.length;
          let ritsu = correctCount * 100 / mondaisu;
          totalSeitouritsu.textContent = `æ­£ç­”æ•°ã¯${correctCount}, æ­£ç­”ç‡ã¯${ritsu.toFixed(1)}ã§ã—ãŸã€‚`;
          if (correctCount === mondaisu) {

            totalComment.textContent = 'æ­å–œæ­å–œ!!';
            
            speakText2('æ­å–œæ­å–œ!!');
          } else {
            totalComment.textContent = '';

          }
        


        } else {
          button.textContent = 'check';
          answerElement.value = '';
          showFlashcard();

        }
      
      }

    }
    // ãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ã«å¤‰æ›ã—ã¦å†ç”Ÿã™ã‚‹é–¢æ•°
    function speakText2(text) {

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'zh-CN'; // ä¸­å›½èªã®è¨€èªã‚³ãƒ¼ãƒ‰
      synth.speak(utterance);
    }
     // çµæœã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
     function displayResult() {
      result.textContent = `æ­£è§£: ${correctCount} å› ä¸æ­£è§£: ${incorrectCount} å›`;
    }




  </script>

</body>

</html>